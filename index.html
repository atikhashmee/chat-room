<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat-Room</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="main-container">
        <div class="user-list-container">
            <div class="card-header bg-secondary text-white text-center p-3 rounded-top">
                <h6 class="mb-0">Active Users</h6>
                <small id="user-info">Connecting to APIRTC...</small>
            </div>
            <ul id="user-list" class="list-group list-group-flush flex-grow-1 overflow-auto">
                <!-- User list items will be appended here -->
            </ul>
        </div>

        <!-- Chat Area -->
        <div class="card chat-card">
            <!-- Loading Indicator -->
            <div id="loading-overlay" class="spinner-overlay">
                <div class="text-center">
                    <div class="spinner-border text-primary" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    <p class="mt-2 text-muted">Connecting to Chat Service...</p>
                </div>
            </div>

            <!-- Header: Modified to include call icons -->
            <div class="card-header bg-primary text-white p-3 rounded-top d-flex align-items-center">
                <!-- Placeholder for visual centering of title -->
                <div style="width: 48px;"></div> 

                <!-- Title -->
                <h5 class="mb-0 mx-auto" id="active-chat-user">APIRTC Chat Room</h5>

                <!-- Call Icons (right-aligned) -->
                <div class="call-icons d-flex align-items-center">
                    <!-- Audio Call Icon -->
                    <a href="#" id="audio-call-btn" class="text-white mx-2" title="Audio Call">
                        <i class="fas fa-phone-alt fa-lg"></i>
                    </a>
                    <!-- Video Call Icon -->
                    <a href="#" id="video-call-btn" class="text-white ml-2" title="Video Call">
                        <i class="fas fa-video fa-lg"></i>
                    </a>
                </div>
            </div>
            
            <!-- Custom Message Box for non-alert feedback -->
            <div id="custom-message-box" class="alert alert-warning m-3 p-2 rounded" role="alert" style="display: none;">
                <strong id="message-box-text"></strong>
            </div>

            <!-- Message Display Area -->
            <div id="messages">
                <!-- Messages will be appended here -->
                <p class="text-center text-muted mt-3">Welcome to the chat! Start typing below.</p>
            </div>

            <!-- Message Input Form -->
            <form id="input-form">
                <div class="input-group">
                    <input type="text" id="message-input" class="form-control" placeholder="Type your message here..." autocomplete="off" required>
                    <div class="input-group-append">
                        <button class="btn btn-primary" type="submit" id="send-button">
                            <i class="fas fa-paper-plane"></i> Send
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>


    <div class="modal fade" id="usermodal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Identify yourself</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body">
            <input type="text" class="form-control" name="userIdentitiname" id="userIdentitiname" placeholder="Your name">
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Continue as guest</button>
            <button type="button" class="btn btn-primary">Enter Chat Room</button>
        </div>
        </div>
    </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdn.apirtc.com/apiRTC/apiRTC-latest.min.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>